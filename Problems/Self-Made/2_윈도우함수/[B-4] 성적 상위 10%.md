# 성적 상위 10%

> **정보**
> - **날짜**: 2026년 01월 21일
> - **분류**: Self-Made (B-4)
> - **주제**: 윈도우 함수 - PERCENT_RANK
> - **난이도**: ★★
> - **재풀이 여부**: X

---

### 문제 설명

전체 학생 중 성적 상위 10%에 해당하는 학생을 출력하세요.

**테이블**: students, scores

**출력**: student_id | total_score | percentile

---

### 정답 풀이

```sql
WITH base AS (
    SELECT
        student_id,
        SUM(score) AS total_score
    FROM scores
    GROUP BY student_id
),
ranked AS (
    SELECT
        student_id,
        total_score,
        PERCENT_RANK() OVER (ORDER BY total_score DESC) AS percentile
    FROM base
)
SELECT
    student_id,
    total_score,
    percentile
FROM ranked
WHERE percentile <= 0.10;
```

---

### 핵심 포인트

1. **PERCENT_RANK()**: 0~1 사이 백분위 값 반환
2. **공식**: (rank - 1) / (total_rows - 1)
3. **ORDER BY DESC**: 점수가 높을수록 상위(0에 가까움)
