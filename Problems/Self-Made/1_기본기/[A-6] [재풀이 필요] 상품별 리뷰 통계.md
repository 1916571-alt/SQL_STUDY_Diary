# 상품별 리뷰 통계

> **정보**
> - **날짜**: 2025년 01월 20일
> - **분류**: Self-Made (A-6)
> - **주제**: GROUP BY + 집계함수
> - **난이도**: ★★
> - **재풀이 여부**: O

---

### 문제 설명
상품별로 리뷰 개수, 평균 평점, 최고 평점, 최저 평점을 구하되,
리뷰가 5개 이상인 상품만 평균 평점 내림차순으로 출력하세요.

**테이블**: products, product_reviews
**출력**: product_name | review_count | avg_rating | max_rating | min_rating

---

### 오답 풀이

```sql
SELECT product_id,
       COUNT(user_id) AS review_count,
       AVG(RATING) AS avg_rating,
       MAX(RATING) AS max_rating,
       MIN(RATING) AS min_rating
FROM product_reviews
GROUP BY product_id
HAVING COUNT(user_id) > 5
ORDER BY avg_rating DESC;
```

**문제점**:
- `product_id`만 출력하고 있음
- 요구사항은 `product_name`을 출력해야 함
- **products 테이블과 JOIN이 필요함**

---

### 정답 풀이

```sql
SELECT p.name AS product_name,
       COUNT(pr.user_id) AS review_count,
       AVG(pr.rating) AS avg_rating,
       MAX(pr.rating) AS max_rating,
       MIN(pr.rating) AS min_rating
FROM product_reviews pr
JOIN products p ON pr.product_id = p.id
GROUP BY p.id, p.name
HAVING COUNT(pr.user_id) > 5
ORDER BY avg_rating DESC;
```

---

### 배운 점
- **출력 컬럼 확인**: 문제에서 요구하는 출력 컬럼을 정확히 확인할 것
- ID만 있으면 이름을 가져오기 위해 JOIN이 필요한 경우가 많음
