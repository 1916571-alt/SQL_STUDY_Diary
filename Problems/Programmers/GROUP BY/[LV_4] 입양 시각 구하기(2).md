# [LV_4] 입양 시각 구하기(2)

> **정보**
> - **날짜**: 2026년 1월 20일
> - **분류**: 프로그래머스 (LV_4)
> - **주제**: GROUP BY

### 문제 핵심
**0시부터 23시까지 각 시간대별 입양 건수 조회 (데이터 없는 시간도 0으로 표시)**

1. 재귀 CTE로 0~23 시간 테이블 생성
2. 실제 입양 데이터에서 시간별 COUNT 집계
3. LEFT JOIN으로 모든 시간대 포함
4. COALESCE로 NULL을 0으로 변환

### 풀이

```sql
WITH RECURSIVE time AS(
SELECT 0 AS HOUR
UNION ALL
SELECT HOUR + 1
FROM time
WHERE HOUR < 23
),
base AS(
SELECT HOUR(a.DATETIME) AS base_time,
       COUNT(*) AS ct
FROM ANIMAL_OUTS a
GROUP BY HOUR(a.DATETIME)
ORDER BY HOUR(a.DATETIME)
)
SELECT HOUR, COALESCE(ct, 0) AS COUNT
FROM time t
LEFT JOIN base b
    ON t.HOUR = b.base_time
```

### 핵심 패턴
- **재귀 CTE (WITH RECURSIVE)**: 연속 숫자 생성
- **LEFT JOIN + COALESCE**: 없는 데이터를 0으로 채우기
