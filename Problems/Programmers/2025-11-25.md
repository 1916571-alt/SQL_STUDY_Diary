# ðŸ“… 2025-11-25 SQL Study Log
> **Platform**: Programmers
> **Topic**: IS NULL, JOIN Deep Dive

---

## ðŸ” 1. IS NULL & CASE WHEN í™œìš©

### ê²½ê¸°ë„ì— ìœ„ì¹˜í•œ ì‹í’ˆì°½ê³ 
`FREEZER_YN`ì´ NULLì¼ ë•Œ 'N'ìœ¼ë¡œ ì¶œë ¥í•˜ê¸°.
```sql
SELECT WAREHOUSE_ID, WAREHOUSE_NAME, ADDRESS,
    CASE
        WHEN FREEZER_YN IS NULL THEN 'N'
        ELSE FREEZER_YN
    END AS FREEZER_YN
FROM FOOD_WAREHOUSE
WHERE ADDRESS LIKE "ê²½ê¸°ë„%"
ORDER BY WAREHOUSE_ID;
```

### ì—…ê·¸ë ˆì´ë“œ í•  ìˆ˜ ì—†ëŠ” ì•„ì´í…œ (Anti-Join)
`LEFT JOIN` í›„ `WHERE IS NULL`ì„ ì‚¬ìš©í•˜ì—¬ ìžì‹ì´ ì—†ëŠ”(ë” ì´ìƒ ì—…ê·¸ë ˆì´ë“œ ë¶ˆê°€í•œ) ë¶€ëª¨ ì•„ì´í…œ ì°¾ê¸°.

```sql
SELECT I.ITEM_ID, I.ITEM_NAME, I.RARITY
FROM ITEM_INFO I
LEFT JOIN ITEM_TREE T ON I.ITEM_ID = T.PARENT_ITEM_ID
WHERE T.PARENT_ITEM_ID IS NULL -- ìžì‹ì´ ì—†ëŠ” ê²½ìš°
ORDER BY I.ITEM_ID DESC;
```

### ìž¡ì€ ë¬¼ê³ ê¸°ì˜ í‰ê·  ê¸¸ì´
`AVG` ë‚´ë¶€ì— `CASE WHEN`ì„ ë„£ì–´ `NULL`ì„ 10ìœ¼ë¡œ ë³€í™˜ í›„ í‰ê·  ê³„ì‚°.
```sql
SELECT ROUND(AVG(COALESCE(LENGTH, 10)), 2) AS AVERAGE_LENGTH
FROM FISH_INFO;
```
> ðŸ’¡ **Tip**: `CASE WHEN ... IS NULL` ëŒ€ì‹  `COALESCE(LENGTH, 10)`ì„ ì“°ë©´ ë” ê¹”ë”í•˜ë‹¤.

---

## ðŸ”— 2. JOIN ì‹¬í™” (Complex Queries)

### 2021ë…„ ê°€ìž… íšŒì› ì¤‘ êµ¬ë§¤ ë¹„ìœ¨
ì„œë¸Œì¿¼ë¦¬ë¡œ '2021ë…„ ì „ì²´ ê°€ìž…ìž ìˆ˜'ë¥¼ êµ¬í•˜ê³ , ë©”ì¸ ì¿¼ë¦¬ì—ì„œ 'êµ¬ë§¤ìž ìˆ˜'ë¥¼ êµ¬í•˜ì—¬ ë‚˜ëˆ”.

```sql
SELECT YEAR(O.SALES_DATE) AS YEAR,
       MONTH(O.SALES_DATE) AS MONTH,
       COUNT(DISTINCT I.USER_ID) AS PURCHASED_USERS,
       ROUND(
           COUNT(DISTINCT I.USER_ID) / 
           (SELECT COUNT(*) FROM USER_INFO WHERE YEAR(JOINED) = '2021'), 
           1
       ) AS PUCHASED_RATIO
FROM USER_INFO I
JOIN ONLINE_SALE O ON I.USER_ID = O.USER_ID
WHERE YEAR(I.JOINED) = '2021'
GROUP BY YEAR, MONTH
ORDER BY YEAR, MONTH;
```

### ëŒ€ì—¬ ê°€ëŠ¥í•œ ìžë™ì°¨ ì°¾ê¸° (Level 4)
**í•µì‹¬ ë¡œì§**: "ë¹Œë¦¬ê³  ì‹¶ì€ ê¸°ê°„ì— ì˜ˆì•½ì´ ìžˆëŠ” ì°¨"ë¥¼ `NOT IN`ìœ¼ë¡œ ë°°ì œí•˜ê¸°.

```sql
SELECT C.CAR_ID, C.CAR_TYPE, C.DAILY_FEE
FROM CAR_RENTAL_COMPANY_CAR C
WHERE C.CAR_ID NOT IN (
    SELECT CAR_ID
    FROM CAR_RENTAL_COMPANY_RENTAL_HISTORY
    WHERE END_DATE >= '2022-11-01' AND START_DATE <= '2022-11-30'
)
AND C.CAR_TYPE IN ('ì„¸ë‹¨', 'SUV');
```
> **Logic**: `ê²¹ì¹˜ëŠ” êµ¬ê°„` = `ê¸°ì¡´ ì˜ˆì•½ ë >= ë‚´ ì‹œìž‘` AND `ê¸°ì¡´ ì˜ˆì•½ ì‹œìž‘ <= ë‚´ ë`
